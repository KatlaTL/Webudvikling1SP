<!DOCTYPE html>
<html lang="en">
    <!-- Make the title dynamic -->
    <%- include("../partials/header.ejs", {title: "Feature Requests"}) %>

    <body>
        <%- include("../partials/navbar.ejs") %>

        <%- include("../partials/components/filter.ejs") %>
        <%- include("../partials/components/createRequestCTA.ejs") %>
        <%- include("../partials/components/search.ejs") %>

       

        <div id="main-content">
            <% if (pageUrl) { %>
                <%- include("../pages/" + pageUrl + ".ejs") %>
            <% } %>
        </div>

        <%- include("../partials/footer.ejs") %>
    </body>

    <% if (locals.loginInfo) { %>
        <script>
            const user = <%- loginInfo %>;
            if (user && Object.keys(user).length > 0) {
                localStorage.setItem("user", JSON.stringify(user));
            }           
        </script>
    <% } %>

</html>
<script>
    let searchFormData = document.querySelector("#searchForm");
    searchFormData.addEventListener("submit",  (e) => {
        e.preventDefault()
        
        const searchFeature = searchFeatureInput.value;
        console.log(searchFeature);

        if (searchFeature === "") {
            alert("Ensure you input a value in the field!");

        } else
        { 

            let baseUrl = window.location.href + 'searchFeatureRequests/searchTerms/Terms';
            console.log(baseUrl);

            const url = new URL(baseUrl);
            url.searchParams.set('searchFeature', searchFeature);
            console.log(url.toString());

            window.location.assign(`${url.toString()}` );
        }
    });
</script>